<div class="row formnav">
    <div class="col-sm-12">
      <div class="pull-left">
        <div class="col-12">
          <h3 style="margin-top: 20px;margin: 0px;margin-top: 10px;">
            <i class="fa-solid fa-book" style="padding-right: 5px;"></i>
            Rest Documentation Designer
          </h3>
          <p style=" margin-bottom: 5px;"> Rest Documentation Designer Form </p>
        </div>
      </div>
      <div class="pull-right">
        <button class="btn btn-outline-success" style="margin-top: 0px;" (click)="save()">
          <i class="fa fa-save"></i>
          Save
        </button>
        <button class="btn btn-outline-danger" style="margin-top: 0px;" [hidden]="mode === 'new-record'"
                (click)="delete()">
          <i class="fa fa-times"></i>
          Delete
        </button>
      </div>
    </div>
</div>

<div class="row form-area">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-header">
        <h5 class="card-title">
          <i class="fa fa-sliders-h"></i>
          General
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <div class="form-group ">
              <label>Id</label>
              <input type="text" readonly class="form-control" value="{{dto.id}}">
              <code></code>
            </div>
            <div class="form-group ">
              <label>Title</label>
              <input type="text" class="form-control" name="title" [(ngModel)]="dto.title">
              <code></code>
            </div>
          </div>
          <div class="col-md-12">
            <div class="card card-user">
              <div class="card-header">
                <h5 class="card-title">
                  <i class="fa-solid fa-text-width"></i>
                  Decription
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <ace style="width: 100%;height: 300px;border: 1px solid #51cbce;"
                           [config]="textEditorConfig"
                           [(value)]="dto.description"></ace>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row form-area">
  <div class="col-md-12">
    <div class="card main-card">
      <div class="card-header">
        <div class="row formnav">
          <div class="col">
            <div class="pull-left">
              <h5 class="card-title pull-left">
                <i class="fas fa-globe-europe"></i>
                Available Endpoints</h5>
            </div>
            <div class="pull-right">
              <button
                data-target="#selectListModal"
                data-toggle="modal"
                class="btn btn-outline-primary">
                <i class="fas fa-plus"></i> Add List
              </button>
              <button
                data-target="#selectFormModal"
                data-toggle="modal"
                class="btn btn-outline-primary">
                <i class="fas fa-plus"></i> Add Form
              </button>
              <button
                (click)="addCustom()"
                class="btn btn-outline-primary">
                <i class="fas fa-plus"></i> Add Custom
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-12">
            <table class="table table-striped">
              <thead class="text-primary">
              <tr>
                <th>Actions</th>
                <th>Id</th>
                <th>Name</th>
                <th>Type</th>
                <th>Json Url</th>
                <th>Title</th>
                <th>Method</th>
              </tr>
              </thead>
              <tbody>
              <tr
                *ngIf="this.dto == undefined || this.dto?.restDocumentationEndpoints?.length === 0 || this.dto?.restDocumentationEndpoints == undefined ">
                <td colspan="7" class="empty-table-row">Empty!</td>
              </tr>
              <tr *ngFor="let column of this.dto?.restDocumentationEndpoints">
                <td>
                  <button title="Remove" (click)="removeRestDocumentationEndpoint(column)" type="button"
                          class="btn btn-outline-danger btn-icon btn-sm">
                    <i class="fa fa-times"></i>
                  </button>
                  <button title="Edit" (click)="selectRestDocumentationEndpoint(column)" type="button"
                          class="btn btn-outline-success btn-icon btn-sm">
                    <i class="fa fa-pencil-alt"></i>
                  </button>
                  <button (click)="moveUp(column, dto?.restDocumentationEndpoints)" type="button" title="Move Up"
                         class="btn btn-outline-warning btn-icon btn-sm">
                        <i class="fa fa-angle-up"></i>
                  </button>
                  <button (click)="moveDown(column, dto?.restDocumentationEndpoints)" type="button"
                          title="Move Down" class="btn btn-outline-warning btn-icon btn-sm">
                    <i class="fa fa-angle-down"></i>
                  </button>
                </td>
                <td>
                  <input *ngIf="column.type === 'list'" type="text" readonly class="form-control" value="{{column?.list?.id}}">
                  <input *ngIf="column.type === 'form'" type="text" readonly class="form-control" value="{{column?.form?.id}}">
                </td>
                <td>
                  <input *ngIf="column.type === 'list'" type="text" class="form-control" readonly value="{{column?.list?.name}}">
                  <input *ngIf="column.type === 'form'" type="text" readonly class="form-control" value="{{column?.form?.name}}">
                </td>
                <td>
                  <input type="text" class="form-control" readonly value="{{column.type}}">
                </td>
                <td>
                  <input *ngIf="column.type === 'list'" type="text" class="form-control" readonly value="{{column?.list?.jsonUrl}}">
                  <input *ngIf="column.type === 'form'" type="text" readonly class="form-control" value="{{column?.form?.jsonUrl}}">
                  <input *ngIf="column.type === 'custom'" type="text" class="form-control" readonly value="{{column.jsonUrl}}">
                </td>
                <td>
                  <input *ngIf="column.type === 'list'" type="text" class="form-control" readonly value="{{column?.title}}">
                  <input *ngIf="column.type === 'form'" type="text" readonly class="form-control" value="{{column?.title}}">
                  <input *ngIf="column.type === 'custom'" type="text" class="form-control" readonly value="{{column.title}}">
                </td>
                <td>
                  <ng-container *ngIf="column.type === 'list'">
                    <select [(ngModel)]="column.method" class="form-control" data-style="btn btn-primary btn-round">
                      <option class="bs-title-option" value="get">Get</option>
                    </select>
                  </ng-container>
                  <ng-container *ngIf="column.type === 'form'">
                    <select [(ngModel)]="column.method" class="form-control" data-style="btn btn-primary btn-round">
                      <option class="bs-title-option" value="post">Post</option>
                      <option class="bs-title-option" value="put">Put</option>
                      <option class="bs-title-option" value="delete">Delete</option>
                    </select>
                  </ng-container>
                  <ng-container *ngIf="column.type === 'custom'">
                    <select [(ngModel)]="column.method" class="form-control" data-style="btn btn-primary btn-round">
                      <option class="bs-title-option" value="post">Post</option>
                      <option class="bs-title-option" value="put">Put</option>
                      <option class="bs-title-option" value="delete">Delete</option>
                    </select>
                  </ng-container>
                </td>
              </tr>

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="row form-area" *ngIf="restDocumentationEndpoint != null">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-header">
        <h5 class="card-title">
          <i class="fa fa-sliders-h"></i>
          Selected Endpoint
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <label>Type</label>
              <input type="text" class="form-control" name="type" [(ngModel)]="restDocumentationEndpoint.type">
              <code></code>
            </div>
            <div class="form-group">
              <label>Json Url</label>
              <input type="text" class="form-control" name="jsonUrl" [(ngModel)]="restDocumentationEndpoint.jsonUrl">
              <code></code>
            </div>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" name="title" [(ngModel)]="restDocumentationEndpoint.title">
              <code></code>
            </div>
            <div class="form-group">
              <label>Method</label>
              <select class="form-control" name="method" [(ngModel)]="restDocumentationEndpoint.method">
                <option value="get">Get</option>
                <option value="post">Post</option>
                <option value="put">Put</option>
                <option value="delete">Delete</option>
              </select>
              <code></code>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row form-area" *ngIf="restDocumentationEndpoint != null && (restDocumentationEndpoint.method === 'put' || restDocumentationEndpoint.method === 'post')">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title">
          <i class="fa-solid fa-ban"></i>
          Exclude Fields
        </h5>
        <button (click)="addExcludeField(restDocumentationEndpoint)" class="btn btn-outline-primary ml-auto">
          <i class="fas fa-plus"></i> Add Field
        </button>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <table class="table table-striped" style="border-collapse: collapse; border-spacing: 0;">
              <thead>
                <tr>
                  <th>Actions</th>
                  <th colspan="2">Field Name</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let excludeField of restDocumentationEndpoint.excludeEndPointFields">
                  <td class="custom-td">
                    <button title="Remove" (click)="removeExcludeField(excludeField)" type="button" class="btn btn-outline-danger btn-icon btn-sm">
                      <i class="fa fa-times"></i>
                    </button>
                  </td>
                  <td>
                    <input type="text" class="form-control" [(ngModel)]="excludeField.excludeField">
                  </td>
                </tr>
                <tr *ngIf="!restDocumentationEndpoint.excludeEndPointFields || restDocumentationEndpoint.excludeEndPointFields.length === 0">
                  <td colspan="2" class="empty-table-row">Empty!</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row form-area" *ngIf="restDocumentationEndpoint != null && (restDocumentationEndpoint.method !== 'put' && restDocumentationEndpoint.method !== 'post')">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-header">
        <h5 class="card-title">
          <i class="fa-solid fa-text-width"></i>
          Description
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <ace style="width: 100%;height: 300px;border: 1px solid #51cbce;"
                   [config]="textEditorConfig"
                   [(value)]="restDocumentationEndpoint.description"></ace>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div aria-labelledby="ModalLabel" class="modal fade" id="selectListModal" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-select-fields">
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <h4 class="title title-up modal-title">
          <i class="fa fa-globe-europe"></i>
          Lists
        </h4>
        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
          <i class="fa fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="row">
            <div class="col-12">
              <table class="table table-striped">
                <thead class=" text-primary">
                <tr>
                  <th>Actions</th>
                  <th>Id</th>
                  <th>Name</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let list of lists" style="cursor: pointer;">
                  <td>
                    <button type="button" title="Delete" class="btn btn-outline-primary btn-icon btn-sm"
                            data-dismiss="modal"
                            (click)="addList(list)">
                      <i class="fa fa-plus"></i>
                    </button>
                     </td>
                     <td>
                     <input type="text" readonly class="form-control transparent-input"
                           value="{{list.id}}">
                     </td>
                     <td>
                     <input type="text" readonly class="form-control transparent-input"
                           value="{{list.name}}">
                    </td>

                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <div class="left-side">
          <button class="btn btn-outline-danger" data-dismiss="modal" type="button">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div aria-labelledby="ModalLabel" class="modal fade" id="selectFormModal" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-select-fields">
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <h4 class="title title-up modal-title">
          <i class="fa fa-globe-europe"></i>
          Forms
        </h4>
        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
          <i class="fa fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="row">
            <div class="col-12">
              <table class="table table-striped">
                <thead class=" text-primary">
                <tr>
                  <th>Actions</th>
                  <th>Id</th>
                  <th>Name</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let form  of forms" style="cursor: pointer;">
                  <td>
                    <button type="button" title="Delete" class="btn btn-outline-primary btn-icon btn-sm"
                            data-dismiss="modal"
                            (click)="addForm(form)">
                      <i class="fa fa-plus"></i>
                    </button>
                     </td>
                     <td>
                     <input type="text" readonly class="form-control transparent-input"
                           value="{{form.id}}">
                     </td>
                     <td>
                     <input type="text" readonly class="form-control transparent-input"
                           value="{{form.name}}">
                    </td>

                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <div class="left-side">
          <button class="btn btn-outline-danger" data-dismiss="modal" type="button">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>







